---
language: java
#install: true
script: mvn clean verify

os:
 - linux
 - osx

before_install:
# os x workaround for JAVA_HOME not set and mvn missing
 - if [ "$TRAVIS_OS_NAME" == "osx" ]; then export JAVA_HOME=$(/usr/libexec/java_home); fi
# installing libaio1 on linux - this is requirement by mysql
 - if [ "$TRAVIS_OS_NAME" == "linux" ]; then sudo apt-get update -qq && sudo apt-get install -y libaio1; fi
# fixing hostname issue and jdk segfaulting on linux
 - sudo hostname "$(hostname | cut -c1-63)"
 - sed -e "s/^\\(127\\.0\\.0\\.1.*\\)/\\1 $(hostname | cut -c1-63)/" /etc/hosts | sudo tee /etc/hosts

#jdk:
# - openjdk7
# - oraclejdk7
# - oraclejdk8

#addons:
#  apt:
#    packages:
#      - libaio1
#
#before_install:
# - cat /etc/hosts # optionally check the content *before*
# - sudo hostname "$(hostname | cut -c1-63)"
# - sed -e "s/^\\(127\\.0\\.0\\.1.*\\)/\\1 $(hostname | cut -c1-63)/" /etc/hosts | sudo tee /etc/hosts
# - cat /etc/hosts # optionally check the content *after*

#notifications:
#  email:
#    - noamal@gmail.com
#    - vilius@wix.com